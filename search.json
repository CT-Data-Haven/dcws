[{"path":"https://ct-data-haven.github.io/dcws/articles/extra-regions.html","id":"differences","dir":"Articles","previous_headings":"","what":"Differences","title":"Extra regions","text":"locations & years full_meta cws_full_data:","code":""},{"path":"https://ct-data-haven.github.io/dcws/articles/extra-regions.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"Extra regions","text":"want work 2021 Port Chester, NY data, can filter dcws:::full_meta:","code":"dcws:::full_meta %>%   select(-path) %>%   filter(name == \"Port Chester NY\", year == 2021) %>%   tidyr::unnest(data) #> # A tibble: 6,146 Ã— 8 #>    name             year code  question            category group response value #>    <chr>           <dbl> <chr> <chr>               <fct>    <fct> <chr>    <dbl> #>  1 Port Chester NY  2021 Q1    Are you satisfied â€¦ Total    Connâ€¦ Yes       0.87 #>  2 Port Chester NY  2021 Q1    Are you satisfied â€¦ Total    Portâ€¦ Yes       0.87 #>  3 Port Chester NY  2021 Q1    Are you satisfied â€¦ Gender   Male  Yes       0.9  #>  4 Port Chester NY  2021 Q1    Are you satisfied â€¦ Gender   Femaâ€¦ Yes       0.85 #>  5 Port Chester NY  2021 Q1    Are you satisfied â€¦ Age      Agesâ€¦ Yes       0.87 #>  6 Port Chester NY  2021 Q1    Are you satisfied â€¦ Age      Agesâ€¦ Yes       0.92 #>  7 Port Chester NY  2021 Q1    Are you satisfied â€¦ Age      Agesâ€¦ Yes       0.8  #>  8 Port Chester NY  2021 Q1    Are you satisfied â€¦ Age      Agesâ€¦ Yes       0.91 #>  9 Port Chester NY  2021 Q1    Are you satisfied â€¦ Race/Etâ€¦ White Yes       0.82 #> 10 Port Chester NY  2021 Q1    Are you satisfied â€¦ Race/Etâ€¦ Latiâ€¦ Yes       0.92 #> # â€¦ with 6,136 more rows"},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"one-question-one-year-few-categories","dir":"Articles","previous_headings":"Analysis","what":"One question, one year, few categories","title":"Fetching DCWS data","text":"","code":"food_21 <- fetch_cws(grepl(\"Have there been times .+ food\", question),            .name = \"Greater New Haven\", .category = c(\"Total\", \"Race/Ethnicity\", \"Gender\"),           .year = 2021, .unnest = TRUE) %>%   calc_food()  knitr::kable(food_21)"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"one-question-several-years-one-location","dir":"Articles","previous_headings":"Analysis","what":"One question, several years, one location","title":"Fetching DCWS data","text":"","code":"food_trend <- fetch_cws(grepl(\"Have there been times .+ food\", question),            .name = \"Greater New Haven\", .category = c(\"Total\", \"Race/Ethnicity\", \"Gender\"),           .unnest = TRUE) %>%   calc_food()  knitr::kable(food_trend)"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"one-question-one-year-compare-groups-and-locations","dir":"Articles","previous_headings":"Analysis","what":"One question, one year, compare groups and locations","title":"Fetching DCWS data","text":"want just location-wide values towns Greater New Haven, race Greater New Haven. filtering inside fetch_cws wanted dig nested data purrr, donâ€™t, â€™ll just little redundant.","code":"food_towns <- fetch_cws(grepl(\"Have there been times .+ food\", question),            .name = c(\"Greater New Haven\", cwi::regions$`Greater New Haven`),           .year = 2021, .unnest = TRUE) %>%   filter((name == \"Greater New Haven\" & category %in% c(\"Total\", \"Race/Ethnicity\")) |            (group %in% cwi::regions$`Greater New Haven`)) %>%   calc_food() %>%   mutate(category = as_factor(ifelse(name == \"Greater New Haven\",                                       as.character(category),                                      \"By town\")))  knitr::kable(food_towns)"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"several-questions-with-same-responses","dir":"Articles","previous_headings":"Analysis","what":"Several questions with same responses","title":"Fetching DCWS data","text":"Usually like analyze questions separately might set responses, bank related questions can . 2020 2021 added question trust several types institutions. canâ€™t remember codes â€œtrustâ€ question text. Oh duh, codes â€œTRUSTâ€ letter! type lookup table / function useful, can add one, â€™s pretty simple fly. responses questions great deal, fair amount, much, none . â€™m going collapse great deal fair amount one, present just . question beginning text, end names institution asked . Lots ways chop data now â€™ve got several groups several questions together.","code":"fetch_cws(grepl(\"[Tt]rust\", question), .year = 2021) %>%   distinct(code, question) #> # A tibble: 7 Ã— 2 #>   code   question                                                                #>   <chr>  <chr>                                                                   #> 1 TRUSTA How much trust do you have in each of the following to look out for thâ€¦ #> 2 TRUSTB How much trust do you have in each of the following to look out for thâ€¦ #> 3 TRUSTC How much trust do you have in each of the following to look out for thâ€¦ #> 4 TRUSTD How much trust do you have in each of the following to look out for thâ€¦ #> 5 TRUSTE How much trust do you have in each of the following to look out for thâ€¦ #> 6 Q17G   People in this neighborhood can be trusted.                             #> 7 CVAX10 (If not vaccinated) How concerned are you, if at all, that you won't bâ€¦ trust_insts <- fetch_cws(grepl(\"^TRUST[A-Z]$\", code), .name = \"Greater New Haven\", .year = 2021,           .category = c(\"Total\", \"Age\"), .unnest = TRUE) %>%   mutate(response = fct_collapse(response, trust = c(\"A great deal\", \"A fair amount\")),          question = stringr::str_extract(question, \"([\\\\w\\\\s]+)$\") %>%            trimws() %>%            as_factor(),          group = fct_inorder(fct_drop(group))) %>%   group_by(category, group, question, response) %>%   summarise(value = sum(value)) %>%   sub_nonanswers() %>%   filter(response == \"trust\") %>%   mutate(value = round(value, digits = 2)) %>%   ungroup()  trust_insts %>%   tidyr::pivot_wider(id_cols = group, names_from = question) %>%   knitr::kable()"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"comparing-to-the-state","dir":"Articles","previous_headings":"Analysis","what":"Comparing to the state","title":"Fetching DCWS data","text":"crosstabs include Connecticut total values compare . script extracts crosstab data includes , â€™re sometimes useful: tables charts publish survey data one location includes state values. benefit want, say, Greater New Haven data, donâ€™t anything special also Connecticut totals. However, pull data multiple locations, annoyingly redundant. â€™ve added argument .drop_ct defaults true, case Connecticut values locationsâ€™ crosstabs dropped data returned. .drop_ct = TRUE (default): .drop_ct = FALSE:","code":"fetch_cws(code == \"Q1\", .year = 2021, .name = \"Greater New Haven\",            .category = c(\"Total\", \"Gender\"), .unnest = TRUE) %>%   distinct(year, name, category, group) #> # A tibble: 3 Ã— 4 #>    year name              category group             #>   <dbl> <chr>             <fct>    <fct>             #> 1  2021 Greater New Haven Total    Greater New Haven #> 2  2021 Greater New Haven Gender   Male              #> 3  2021 Greater New Haven Gender   Female fetch_cws(code == \"Q1\", .year = 2021, .name = \"Greater New Haven\",            .category = c(\"Total\", \"Gender\"), .unnest = TRUE, .drop_ct = FALSE) %>%   distinct(year, name, category, group) #> # A tibble: 4 Ã— 4 #>    year name              category group             #>   <dbl> <chr>             <fct>    <fct>             #> 1  2021 Greater New Haven Total    Connecticut       #> 2  2021 Greater New Haven Total    Greater New Haven #> 3  2021 Greater New Haven Gender   Male              #> 4  2021 Greater New Haven Gender   Female"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"weights","dir":"Articles","previous_headings":"","what":"Weights","title":"Fetching DCWS data","text":"crosstabs table survey weights group, either standalone section bottom Excel spreadsheet couple rows top question. cwi::read_weights now works either formats; latter, weights taken first question (always satisfied area question, every participant receives). Just like preparing package meant extracting data, â€™s also stash weights files. useful operations like collapsing multiple small groups larger ones, usually income brackets groupings may consistent years locations otherwise. â€™s function getting weights , arguments getting dataâ€¦ â€¦can just use .add_wts argument fetch_cws . can also use cwi::collapse_n_wt help calculation, basically â€™re collapsing several levels, getting weighted means. One reason locations might different income brackets depending sample size, â€™ve moved toward using larger income brackets latest wave survey. addition sample size, might also collapse groups can compare across locations years. example, check obnoxious : Yikes â€™ll probably want collapse , like :","code":"head(fetch_wts(.year = 2021, .name = \"Greater New Haven\", .unnest = TRUE)) #> # A tibble: 6 Ã— 4 #>    year name              group             weight #>   <dbl> <chr>             <fct>              <dbl> #> 1  2021 Greater New Haven Connecticut        1     #> 2  2021 Greater New Haven Greater New Haven  1     #> 3  2021 Greater New Haven Male               0.471 #> 4  2021 Greater New Haven Female             0.529 #> 5  2021 Greater New Haven Ages 18-34         0.313 #> 6  2021 Greater New Haven Ages 35-49         0.238 satisfied_area <- fetch_cws(grepl(\"satisfied with the city\", question),            .name = c(\"Connecticut\", \"Greater New Haven\", \"New Haven\"), .unnest = TRUE, .category = c(\"Total\", \"Income\"))  satisfied_area %>%   filter(category == \"Income\") %>%   distinct(year, name, group) %>%   mutate(value = \"x\", id = paste(name, year)) %>%   tidyr::pivot_wider(id_cols = group, names_from = id, values_from = value, names_sort = TRUE, values_fill = \"\") %>%   arrange(group) %>%   knitr::kable() asthma18 <- fetch_cws(question == \"Asthma\", .year = 2018, .name = \"Greater New Haven\",            .category = c(\"Total\", \"Income\", \"Race/Ethnicity\"), .add_wts = TRUE, .unnest = TRUE) %>%   collapse_n_wt(year:response,                 .lvls = list(\"<$30K\" = c(\"<$15K\", \"$15K-$30K\"),                              \"$30K-$100K\" = c(\"$30K-$50K\", \"$50K-$75K\", \"$75K-$100K\"),                              \"$100K+\" = c(\"$100K-$200K\", \"$200K+\"))) %>%   sub_nonanswers() %>%   mutate(value = round(value, digits = 2)) %>%   filter(response == \"Yes\")  knitr::kable(asthma18)"},{"path":"https://ct-data-haven.github.io/dcws/articles/fetching-dcws-data.html","id":"output","dir":"Articles","previous_headings":"","what":"Output","title":"Fetching DCWS data","text":"â€™s ! Usually â€™ll save bunch related analyses lists data frames, write rds files easy loading.","code":""},{"path":"https://ct-data-haven.github.io/dcws/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Camille Seaberry. Author, maintainer.","code":""},{"path":"https://ct-data-haven.github.io/dcws/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Seaberry C (2022). dcws: Data DataHaven Community Wellbeing Survey. R package version 0.1.3, https://ct-data-haven.github.io/dcws.","code":"@Manual{,   title = {dcws: Data from the DataHaven Community Wellbeing Survey},   author = {Camille Seaberry},   year = {2022},   note = {R package version 0.1.3},   url = {https://ct-data-haven.github.io/dcws}, }"},{"path":"https://ct-data-haven.github.io/dcws/index.html","id":"dcws","dir":"","previous_headings":"","what":"Data from the DataHaven Community Wellbeing Survey","title":"Data from the DataHaven Community Wellbeing Survey","text":"small data-focused package make easier use DataHaven Community Wellbeing Survey. contains data extracted crosstabs 2015, 2018, 2020 (statewide ), 2021 survey waves.","code":""},{"path":"https://ct-data-haven.github.io/dcws/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Data from the DataHaven Community Wellbeing Survey","text":"can install development version dcws GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"CT-Data-Haven/dcws\")"},{"path":"https://ct-data-haven.github.io/dcws/index.html","id":"included-data","dir":"","previous_headings":"","what":"Included data","title":"Data from the DataHaven Community Wellbeing Survey","text":"2022-04-05, data included :","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/clean_lvls.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean up categories and groups from crosstabs â€” clean_lvls","title":"Clean up categories and groups from crosstabs â€” clean_lvls","text":"bunch string cleaning standardize categories (Gender, Age, etc) groups (Male, Ages 65+, etc) across available crosstabs. operation categories groups overlap. lists regex replacements exported, hidden either: access dcws:::to_replace, dcws:::to_remove, dcws:::to_recode, dcws:::to_collapse need .","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/clean_lvls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean up categories and groups from crosstabs â€” clean_lvls","text":"","code":"clean_lvls(x)"},{"path":"https://ct-data-haven.github.io/dcws/reference/clean_lvls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean up categories and groups from crosstabs â€” clean_lvls","text":"x vector. factor already, coerced one.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/clean_lvls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean up categories and groups from crosstabs â€” clean_lvls","text":"factor","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/clean_lvls.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean up categories and groups from crosstabs â€” clean_lvls","text":"","code":"# vector of strings as read in from crosstabs categories <- c(\"Connecticut\", \"NH Inner Ring\", \"Gender\", \"Age\",                 \"Race/Ethnicity\", \"Education\", \"Income\", \"Children in HH\") levels(clean_lvls(categories)) #> [1] \"Connecticut\"          \"New Haven Inner Ring\" \"Gender\"               #> [4] \"Age\"                  \"Race/Ethnicity\"       \"Education\"            #> [7] \"Income\"               \"With children\"         groups <- c(\"M\", \"F\", \"18-34\", \"35 to 49\", \"65 and older\",             \"Black/Afr Amer\", \"African American/Black\", \"High School\",             \"Less than $15,000\", \"$15,000 to $30,000\", \"No\") levels(clean_lvls(groups)) #>  [1] \"Male\"        \"Female\"      \"Ages 18-34\"  \"Ages 35-49\"  \"Ages 65+\"    #>  [6] \"Black\"       \"High school\" \"<$15K\"       \"$15K-$30K\"   \"No kids\""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"nested data frame row corresponds year location survey. data column contains full set data extracted respective crosstabs; , turn, nested question question code. bit strange format, balances ease subsetting year location saving space avoiding repeated values (e.g. listing full question text dozens times).","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"","code":"cws_full_data"},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"data frame 73 rows 3 columns.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"outer-structure-","dir":"Reference","previous_headings":"","what":"Outer structure:","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"year Numeric, year survey name Text location survey List-column data frames survey response data. number rows varies based questions participant groups available, 3 columns .","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"for-the-survey-list-column-","dir":"Reference","previous_headings":"","what":"For the survey list-column:","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"code Question code, e.g. \"Q2\", \"Q4E\", \"RENTEVICT\" question Full text survey question data List-column data frames, providing actual response values per question. , number rows varies, 4 columns .","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"for-the-data-list-column-","dir":"Reference","previous_headings":"","what":"For the data list-column:","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"category Factor: participant group categories, e.g. \"Gender\", \"Age\" group Factor: participant group, e.g. \"Male\", \"Ages 65+\" response Text responses, depending question value Share participants giving response","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"Compiled DCWS crosstabs","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":", structure probably annoying. Easier extraction available using fetch_cws.","code":""},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Contents of DataHaven Community Wellbeing Crosstabs â€” cws_full_data","text":"","code":"# bunch of different ways to work with this # specific question for one location and one year cws_full_data %>%   dplyr::filter(year == 2018, name == \"Greater New Haven\") %>%   tidyr::unnest(survey) %>%   dplyr::filter(grepl(\"suitable employment\", question)) %>%   tidyr::unnest(data) #> # A tibble: 138 Ã— 8 #>     year name              code  question          category group response value #>    <dbl> <chr>             <chr> <chr>             <fct>    <fct> <chr>    <dbl> #>  1  2018 Greater New Haven Q4E   The ability of râ€¦ Total    Connâ€¦ Excelleâ€¦  0.09 #>  2  2018 Greater New Haven Q4E   The ability of râ€¦ Total    Greaâ€¦ Excelleâ€¦  0.08 #>  3  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Male  Excelleâ€¦  0.08 #>  4  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Femaâ€¦ Excelleâ€¦  0.08 #>  5  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.11 #>  6  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.09 #>  7  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  8  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  9  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ White Excelleâ€¦  0.07 #> 10  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ Black Excelleâ€¦  0.09 #> # â€¦ with 128 more rows  # simpler but a bit slower--has to unnest to full 600k rows cws_full_data %>%   tidyr::unnest(survey) %>%   tidyr::unnest(data) %>%   dplyr::filter(year == 2018,                 name == \"Greater New Haven\",                 grepl(\"suitable employment\", question)) #> # A tibble: 138 Ã— 8 #>     year name              code  question          category group response value #>    <dbl> <chr>             <chr> <chr>             <fct>    <fct> <chr>    <dbl> #>  1  2018 Greater New Haven Q4E   The ability of râ€¦ Total    Connâ€¦ Excelleâ€¦  0.09 #>  2  2018 Greater New Haven Q4E   The ability of râ€¦ Total    Greaâ€¦ Excelleâ€¦  0.08 #>  3  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Male  Excelleâ€¦  0.08 #>  4  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Femaâ€¦ Excelleâ€¦  0.08 #>  5  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.11 #>  6  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.09 #>  7  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  8  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  9  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ White Excelleâ€¦  0.07 #> 10  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ Black Excelleâ€¦  0.09 #> # â€¦ with 128 more rows  # specific question, one location, multiple years cws_full_data %>%   dplyr::mutate(survey = purrr::map(survey, dplyr::filter, question == \"Diabetes\")) %>%   dplyr::filter(name == \"New Haven\") %>%   tidyr::unnest(survey) %>%   tidyr::unnest(data) #> # A tibble: 236 Ã— 8 #>     year name      code  question category       group       response value #>    <dbl> <chr>     <chr> <chr>    <fct>          <fct>       <chr>    <dbl> #>  1  2015 New Haven Q23C  Diabetes Total          Connecticut Yes       0.09 #>  2  2015 New Haven Q23C  Diabetes Total          New Haven   Yes       0.1  #>  3  2015 New Haven Q23C  Diabetes Gender         Male        Yes       0.09 #>  4  2015 New Haven Q23C  Diabetes Gender         Female      Yes       0.12 #>  5  2015 New Haven Q23C  Diabetes Age            Ages 18-34  Yes       0.01 #>  6  2015 New Haven Q23C  Diabetes Age            Ages 35-49  Yes       0.08 #>  7  2015 New Haven Q23C  Diabetes Age            Ages 50-64  Yes       0.27 #>  8  2015 New Haven Q23C  Diabetes Age            Ages 65+    Yes       0.24 #>  9  2015 New Haven Q23C  Diabetes Race/Ethnicity White       Yes       0.07 #> 10  2015 New Haven Q23C  Diabetes Race/Ethnicity Black       Yes       0.15 #> # â€¦ with 226 more rows  # make things easier with fetch_cws: flexibly grab by location, year, and/or # filter conditions fetch_cws(grepl(\"Have there been times .+ food\", question), .year = 2018,           .name = c(\"Connecticut\", \"Greater New Haven\", \"New Haven\")) #> # A tibble: 3 Ã— 5 #>    year name              code  question                                data     #>   <dbl> <chr>             <chr> <chr>                                   <list>   #> 1  2018 Connecticut       Q62   Have there been times in the past 12 mâ€¦ <tibble> #> 2  2018 Greater New Haven Q62   Have there been times in the past 12 mâ€¦ <tibble> #> 3  2018 New Haven         Q62   Have there been times in the past 12 mâ€¦ <tibble>"},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_wts.html","id":null,"dir":"Reference","previous_headings":"","what":"DCWS weights â€” cws_full_wts","title":"DCWS weights â€” cws_full_wts","text":"nested data frame containing survey's weights, used combining groups calculate average values. can joined DCWS data fetch_cws, manually. Note larger areas 2018 (maybe also 2015), groups might line data weights--check NAs weights column need .","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_wts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"DCWS weights â€” cws_full_wts","text":"","code":"cws_full_wts"},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_wts.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"DCWS weights â€” cws_full_wts","text":"data frame 87 rows 3 variables: year Numeric, year survey name Text location weights list nested data frames, 2 columns group weight.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/cws_full_wts.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"DCWS weights â€” cws_full_wts","text":"Compiled DCWS crosstabs","code":""},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/reference/dcws-package.html","id":null,"dir":"Reference","previous_headings":"","what":"dcws: Data from the DataHaven Community Wellbeing Survey â€” dcws-package","title":"dcws: Data from the DataHaven Community Wellbeing Survey â€” dcws-package","text":"collection data past years DCWS, plus bit metadata functions extracting subsets data.","code":""},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/reference/dcws-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"dcws: Data from the DataHaven Community Wellbeing Survey â€” dcws-package","text":"Maintainer: Camille Seaberry camille@ctdatahaven.org","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_cws.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch and subset DCWS data â€” fetch_cws","title":"Fetch and subset DCWS data â€” fetch_cws","text":"function returns doubly-nested data cws_full_data nicer format, options subsetting. Filtering year, location name, category named options, take vector one values, valid conditions can passed ... flexible filtering. named options, NULL, default, mean filtering done column.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_cws.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch and subset DCWS data â€” fetch_cws","text":"","code":"fetch_cws(   ...,   .year = NULL,   .name = NULL,   .category = NULL,   .unnest = FALSE,   .add_wts = FALSE,   .drop_ct = TRUE )"},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_cws.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch and subset DCWS data â€” fetch_cws","text":"... number conditions filter , passed dplyr::filter. override named options, filter year > 2020 set .year = 2015 going get data. .year vector one numbers giving year(s) subset . NULL, filtering done year. .name vector one strings giving name(s) subset . NULL, filtering done name. .category vector one strings giving category(ies) subset . NULL, filtering done category. .unnest Logical: data column unnested? just saves step calling tidyr::unnest defaults false. .add_wts Logical: groups' survey weights attached, via left-join dcws::cws_full_wts? useful need collapse groups later; otherwise might get stuck annoying tidyr::unnest messes. .drop_ct Logical: statewide totals included crosstab extract? can useful single location order Connecticut values compare , becomes redundant multiple locations. default TRUE means statewide averages included.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_cws.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch and subset DCWS data â€” fetch_cws","text":"data frame, 5 9 columns, depending arguments. Columns year, name, code, question always included. Additional columns:","code":""},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_cws.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch and subset DCWS data â€” fetch_cws","text":"","code":"# no filtering fetch_cws() #> # A tibble: 10,423 Ã— 5 #>     year name  code  question                                           data     #>    <dbl> <chr> <chr> <chr>                                              <list>   #>  1  2015 5CT   Q1    Are you satisfied with the city or area where youâ€¦ <tibble> #>  2  2015 5CT   Q2    As a place to live, is the city or area where youâ€¦ <tibble> #>  3  2015 5CT   Q3A   How responsive local government is to the needs oâ€¦ <tibble> #>  4  2015 5CT   Q3B   The availability of the goods and services that mâ€¦ <tibble> #>  5  2015 5CT   Q3C   The job done by the police to keep residents safe  <tibble> #>  6  2015 5CT   Q3D   The ability of residents to obtain suitable emploâ€¦ <tibble> #>  7  2015 5CT   Q3E   As a place to raise children                       <tibble> #>  8  2015 5CT   Q3F   The condition of public parks and other public reâ€¦ <tibble> #>  9  2015 5CT   Q4    Over the past 12 months, have you volunteered forâ€¦ <tibble> #> 10  2015 5CT   Q5    How would you describe your ability to influence â€¦ <tibble> #> # â€¦ with 10,413 more rows  # filter by year, name, and/or category fetch_cws(.name = c(\"Greater New Haven\", \"New Haven\")) # all years #> # A tibble: 790 Ã— 5 #>     year name              code  question                               data     #>    <dbl> <chr>             <chr> <chr>                                  <list>   #>  1  2015 Greater New Haven Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  2  2015 Greater New Haven Q2    As a place to live, is the city or arâ€¦ <tibble> #>  3  2015 Greater New Haven Q3A   How responsive local government is toâ€¦ <tibble> #>  4  2015 Greater New Haven Q3B   The availability of the goods and serâ€¦ <tibble> #>  5  2015 Greater New Haven Q3C   The job done by the police to keep reâ€¦ <tibble> #>  6  2015 Greater New Haven Q3D   The ability of residents to obtain suâ€¦ <tibble> #>  7  2015 Greater New Haven Q3E   As a place to raise children           <tibble> #>  8  2015 Greater New Haven Q3F   The condition of public parks and othâ€¦ <tibble> #>  9  2015 Greater New Haven Q4    Over the past 12 months, have you volâ€¦ <tibble> #> 10  2015 Greater New Haven Q5    How would you describe your ability tâ€¦ <tibble> #> # â€¦ with 780 more rows fetch_cws(.year = 2018, .name = c(\"Greater New Haven\", \"New Haven\")) #> # A tibble: 291 Ã— 5 #>     year name              code  question                               data     #>    <dbl> <chr>             <chr> <chr>                                  <list>   #>  1  2018 Greater New Haven Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  2  2018 Greater New Haven Q2    As a place to live, is the city or arâ€¦ <tibble> #>  3  2018 Greater New Haven Q4A   How responsive local government is toâ€¦ <tibble> #>  4  2018 Greater New Haven Q4D   The job done by the police to keep reâ€¦ <tibble> #>  5  2018 Greater New Haven Q4E   The ability of residents to obtain suâ€¦ <tibble> #>  6  2018 Greater New Haven Q4F   As a place to raise children           <tibble> #>  7  2018 Greater New Haven Q4G   The condition of public parks and othâ€¦ <tibble> #>  8  2018 Greater New Haven Q4H   The availability of affordable, high-â€¦ <tibble> #>  9  2018 Greater New Haven Q5    Over the past 12 months, have you volâ€¦ <tibble> #> 10  2018 Greater New Haven Q6    How would you describe your ability tâ€¦ <tibble> #> # â€¦ with 281 more rows fetch_cws(.year = 2021, .name = \"New Haven\", .category = c(\"Total\", \"Age\", \"Gender\")) #> # A tibble: 135 Ã— 5 #>     year name      code   question                                      data     #>    <dbl> <chr>     <chr>  <chr>                                         <list>   #>  1  2021 New Haven Q1     Are you satisfied with the city or area wherâ€¦ <tibble> #>  2  2021 New Haven Q2     As a place to live, is the city or area wherâ€¦ <tibble> #>  3  2021 New Haven Q4A    How responsive local government is to the neâ€¦ <tibble> #>  4  2021 New Haven Q4D    The job done by the police to keep residentsâ€¦ <tibble> #>  5  2021 New Haven Q4E    The ability of residents to obtain suitable â€¦ <tibble> #>  6  2021 New Haven Q4F    As a place to raise children                  <tibble> #>  7  2021 New Haven Q4G    The condition of public parks and other publâ€¦ <tibble> #>  8  2021 New Haven Q4H    The availability of affordable, high-qualityâ€¦ <tibble> #>  9  2021 New Haven Q6     How would you describe your ability to influâ€¦ <tibble> #> 10  2021 New Haven TRUSTA How much trust do you have in each of the foâ€¦ <tibble> #> # â€¦ with 125 more rows  # filter by conditions fetch_cws(code == \"Q4E\", .year = 2018, .name = c(\"Greater New Haven\", \"New Haven\"), .unnest = TRUE) #> # A tibble: 240 Ã— 8 #>     year name              code  question          category group response value #>    <dbl> <chr>             <chr> <chr>             <fct>    <fct> <chr>    <dbl> #>  1  2018 Greater New Haven Q4E   The ability of râ€¦ Total    Greaâ€¦ Excelleâ€¦  0.08 #>  2  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Male  Excelleâ€¦  0.08 #>  3  2018 Greater New Haven Q4E   The ability of râ€¦ Gender   Femaâ€¦ Excelleâ€¦  0.08 #>  4  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.11 #>  5  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.09 #>  6  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  7  2018 Greater New Haven Q4E   The ability of râ€¦ Age      Agesâ€¦ Excelleâ€¦  0.06 #>  8  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ White Excelleâ€¦  0.07 #>  9  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ Black Excelleâ€¦  0.09 #> 10  2018 Greater New Haven Q4E   The ability of râ€¦ Race/Etâ€¦ Latiâ€¦ Excelleâ€¦  0.12 #> # â€¦ with 230 more rows fetch_cws(grepl(\"Q4[A-Z]\", code), .year = 2018, .name = c(\"Greater New Haven\", \"New Haven\")) #> # A tibble: 12 Ã— 5 #>     year name              code  question                               data     #>    <dbl> <chr>             <chr> <chr>                                  <list>   #>  1  2018 Greater New Haven Q4A   How responsive local government is toâ€¦ <tibble> #>  2  2018 Greater New Haven Q4D   The job done by the police to keep reâ€¦ <tibble> #>  3  2018 Greater New Haven Q4E   The ability of residents to obtain suâ€¦ <tibble> #>  4  2018 Greater New Haven Q4F   As a place to raise children           <tibble> #>  5  2018 Greater New Haven Q4G   The condition of public parks and othâ€¦ <tibble> #>  6  2018 Greater New Haven Q4H   The availability of affordable, high-â€¦ <tibble> #>  7  2018 New Haven         Q4A   How responsive local government is toâ€¦ <tibble> #>  8  2018 New Haven         Q4D   The job done by the police to keep reâ€¦ <tibble> #>  9  2018 New Haven         Q4E   The ability of residents to obtain suâ€¦ <tibble> #> 10  2018 New Haven         Q4F   As a place to raise children           <tibble> #> 11  2018 New Haven         Q4G   The condition of public parks and othâ€¦ <tibble> #> 12  2018 New Haven         Q4H   The availability of affordable, high-â€¦ <tibble> fetch_cws(grepl(\"health insurance\", question), year > 2015, .name = \"New Haven\") #> # A tibble: 5 Ã— 5 #>    year name      code  question                                        data     #>   <dbl> <chr>     <chr> <chr>                                           <list>   #> 1  2018 New Haven Q26   Do you have health insurance?                   <tibble> #> 2  2018 New Haven Q27   (If have health insurance) What type of healthâ€¦ <tibble> #> 3  2018 New Haven Q30B  The doctor or hospital wouldn't accept your heâ€¦ <tibble> #> 4  2021 New Haven Q26   Do you have health insurance?                   <tibble> #> 5  2021 New Haven Q27   (If yes) What type of health insurance do you â€¦ <tibble> fetch_cws(question %in% c(\"Diabetes\", \"Asthma\"), .name = \"Bridgeport\") #> # A tibble: 6 Ã— 5 #>    year name       code  question data              #>   <dbl> <chr>      <chr> <chr>    <list>            #> 1  2015 Bridgeport Q23C  Diabetes <tibble [80 Ã— 4]> #> 2  2015 Bridgeport Q23E  Asthma   <tibble [80 Ã— 4]> #> 3  2018 Bridgeport Q23C  Diabetes <tibble [72 Ã— 4]> #> 4  2018 Bridgeport Q23E  Asthma   <tibble [72 Ã— 4]> #> 5  2021 Bridgeport Q23C  Diabetes <tibble [72 Ã— 4]> #> 6  2021 Bridgeport Q23E  Asthma   <tibble [72 Ã— 4]>  # how you might use this to make a beautiful table fetch_cws(code == \"Q1\", .year = 2021, .category = c(\"Income\", \"Gender\"), .unnest = TRUE) %>%   dplyr::group_by(name, category, group) %>%   cwi::sub_nonanswers() %>%   dplyr::filter(response == \"Yes\") %>%   tidyr::pivot_wider(id_cols = name, names_from = group, values_from = value) #> # A tibble: 28 Ã— 6 #> # Groups:   name [28] #>    name               Male Female `<$30K` `$30K-$100K` `$100K+` #>    <chr>             <dbl>  <dbl>   <dbl>        <dbl>    <dbl> #>  1 Bridgeport        0.788  0.778   0.758        0.778    0.814 #>  2 Bristol           0.78   0.888  NA           NA       NA     #>  3 Connecticut       0.888  0.889   0.798        0.879    0.919 #>  4 Danbury           0.94   0.929   0.99         0.94     0.929 #>  5 Darien            0.95   0.93   NA           NA       NA     #>  6 Fairfield         0.88   0.88    0.69         0.79     0.96  #>  7 Fairfield County  0.87   0.899   0.798        0.889    0.929 #>  8 Greater Hartford  0.898  0.89    0.828        0.908    0.960 #>  9 Greater New Haven 0.869  0.879   0.828        0.899    0.87  #> 10 Greater Waterbury 0.85   0.837   0.7          0.828    0.92  #> # â€¦ with 18 more rows  # adding weights to collapse groups (e.g. combining income brackets) fetch_cws(code == \"Q1\", .year = 2021, .add_wts = TRUE) #> # A tibble: 29 Ã— 5 #>     year name              code  question                               data     #>    <dbl> <chr>             <chr> <chr>                                  <list>   #>  1  2021 Bridgeport        Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  2  2021 Bristol           Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  3  2021 Connecticut       Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  4  2021 Danbury           Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  5  2021 Darien            Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  6  2021 Fairfield         Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  7  2021 Fairfield County  Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  8  2021 Greater Hartford  Q1    Are you satisfied with the city or arâ€¦ <tibble> #>  9  2021 Greater New Haven Q1    Are you satisfied with the city or arâ€¦ <tibble> #> 10  2021 Greater Waterbury Q1    Are you satisfied with the city or arâ€¦ <tibble> #> # â€¦ with 19 more rows fetch_cws(.year = 2021, .name = \"New Haven\", .category = c(\"Total\", \"Age\", \"Income\"),           .add_wts = TRUE, .unnest = TRUE) #> # A tibble: 3,294 Ã— 9 #>     year name      code  question           category group response value weight #>    <dbl> <chr>     <chr> <chr>              <fct>    <fct> <chr>    <dbl>  <dbl> #>  1  2021 New Haven Q1    Are you satisfiedâ€¦ Total    New â€¦ Yes       0.82  1     #>  2  2021 New Haven Q1    Are you satisfiedâ€¦ Age      Agesâ€¦ Yes       0.8   0.456 #>  3  2021 New Haven Q1    Are you satisfiedâ€¦ Age      Agesâ€¦ Yes       0.82  0.219 #>  4  2021 New Haven Q1    Are you satisfiedâ€¦ Age      Agesâ€¦ Yes       0.83  0.151 #>  5  2021 New Haven Q1    Are you satisfiedâ€¦ Age      Agesâ€¦ Yes       0.88  0.173 #>  6  2021 New Haven Q1    Are you satisfiedâ€¦ Income   <$30K Yes       0.75  0.325 #>  7  2021 New Haven Q1    Are you satisfiedâ€¦ Income   $30Kâ€¦ Yes       0.82  0.515 #>  8  2021 New Haven Q1    Are you satisfiedâ€¦ Income   $100â€¦ Yes       0.92  0.16  #>  9  2021 New Haven Q1    Are you satisfiedâ€¦ Total    New â€¦ No        0.17  1     #> 10  2021 New Haven Q1    Are you satisfiedâ€¦ Age      Agesâ€¦ No        0.2   0.456 #> # â€¦ with 3,284 more rows"},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_wts.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch and subset weights for DCWS data â€” fetch_wts","title":"Fetch and subset weights for DCWS data â€” fetch_wts","text":"function returns nested cws_full_wts data, meant counterpart fetch_cws.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_wts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch and subset weights for DCWS data â€” fetch_wts","text":"","code":"fetch_wts(..., .year = NULL, .name = NULL, .unnest = FALSE)"},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_wts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch and subset weights for DCWS data â€” fetch_wts","text":"... number conditions filter , passed dplyr::filter. override named options, filter year > 2020 set .year = 2015 going get data. .year vector one numbers giving year(s) subset . NULL, filtering done year. .name vector one strings giving name(s) subset . NULL, filtering done name. .unnest Logical: data column unnested? just saves step calling tidyr::unnest defaults false.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_wts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch and subset weights for DCWS data â€” fetch_wts","text":"data frame, either 3 columns (.unnest = FALSE) 4 columns (.unnest = TRUE). .unnest = FALSE: columns year, name, list nested data frames weights .unnest = TRUE: year, name, group, weight","code":""},{"path":[]},{"path":"https://ct-data-haven.github.io/dcws/reference/fetch_wts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch and subset weights for DCWS data â€” fetch_wts","text":"","code":"# no filtering fetch_wts() #> # A tibble: 96 Ã— 3 #>     year name               weights           #>    <dbl> <chr>              <list>            #>  1  2015 5CT                <tibble [2 Ã— 2]>  #>  2  2015 Bridgeport         <tibble [21 Ã— 2]> #>  3  2015 Bristol            <tibble [14 Ã— 2]> #>  4  2015 Greater Waterbury  <tibble [25 Ã— 2]> #>  5  2015 Connecticut        <tibble [27 Ã— 2]> #>  6  2015 Greater Hartford   <tibble [24 Ã— 2]> #>  7  2015 Danbury            <tibble [18 Ã— 2]> #>  8  2015 Fairfield County   <tibble [27 Ã— 2]> #>  9  2015 Greater Bridgeport <tibble [25 Ã— 2]> #> 10  2015 Greater New Haven  <tibble [25 Ã— 2]> #> # â€¦ with 86 more rows  # weights are generally useful in combination with actual data # but unless you unnest in advance, this is messy fetch_cws(code == \"Q4E\", .year = 2021,           .name = c(\"Greater New Haven\", \"New Haven\"), .unnest = TRUE) %>%   dplyr::left_join(fetch_wts(.unnest = TRUE), by = c(\"year\", \"name\", \"group\")) #> # A tibble: 216 Ã— 9 #>     year name              code  question   category group response value weight #>    <dbl> <chr>             <chr> <chr>      <fct>    <fct> <chr>    <dbl>  <dbl> #>  1  2021 Greater New Haven Q4E   The abiliâ€¦ Total    Greaâ€¦ Excelleâ€¦  0.09  1     #>  2  2021 Greater New Haven Q4E   The abiliâ€¦ Gender   Male  Excelleâ€¦  0.1   0.471 #>  3  2021 Greater New Haven Q4E   The abiliâ€¦ Gender   Femaâ€¦ Excelleâ€¦  0.08  0.529 #>  4  2021 Greater New Haven Q4E   The abiliâ€¦ Age      Agesâ€¦ Excelleâ€¦  0.08  0.313 #>  5  2021 Greater New Haven Q4E   The abiliâ€¦ Age      Agesâ€¦ Excelleâ€¦  0.1   0.238 #>  6  2021 Greater New Haven Q4E   The abiliâ€¦ Age      Agesâ€¦ Excelleâ€¦  0.09  0.194 #>  7  2021 Greater New Haven Q4E   The abiliâ€¦ Age      Agesâ€¦ Excelleâ€¦  0.1   0.255 #>  8  2021 Greater New Haven Q4E   The abiliâ€¦ Race/Etâ€¦ White Excelleâ€¦  0.11  0.677 #>  9  2021 Greater New Haven Q4E   The abiliâ€¦ Race/Etâ€¦ Black Excelleâ€¦  0.06  0.163 #> 10  2021 Greater New Haven Q4E   The abiliâ€¦ Race/Etâ€¦ Latiâ€¦ Excelleâ€¦  0.03  0.16  #> # â€¦ with 206 more rows"},{"path":"https://ct-data-haven.github.io/dcws/reference/group_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"DCWS group metadata â€” group_meta","title":"DCWS group metadata â€” group_meta","text":"reference dataset listing categories groups available survey year location. questions available groups.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/group_meta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"DCWS group metadata â€” group_meta","text":"","code":"group_meta"},{"path":"https://ct-data-haven.github.io/dcws/reference/group_meta.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"DCWS group metadata â€” group_meta","text":"data frame 82 rows 3 variables: year Numeric, year survey name Text location groups list nested data frames, 2 columns category group.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/group_meta.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"DCWS group metadata â€” group_meta","text":"Compiled DCWS crosstabs","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator â€” %>%","title":"Pipe operator â€” %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator â€” %>%","text":"","code":"lhs %>% rhs"},{"path":"https://ct-data-haven.github.io/dcws/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator â€” %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator â€” %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://ct-data-haven.github.io/dcws/reference/tidyeval.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy eval helpers â€” tidyeval","title":"Tidy eval helpers â€” tidyeval","text":"page lists tidy eval tools reexported package rlang. learn using tidy eval scripts packages high level, see dplyr programming vignette ggplot2 packages vignette. Metaprogramming section Advanced R may also useful deeper dive. tidy eval operators {{, !!, !!! syntactic constructs specially interpreted tidy eval functions. mostly need {{, !! !!! advanced operators use simple cases. curly-curly operator {{ allows tunnel data-variables passed function arguments inside tidy eval functions. {{ designed individual arguments. pass multiple arguments contained dots, use ... normal way. enquo() enquos() delay execution one several function arguments. former returns single expression, latter returns list expressions. defused, expressions longer evaluate . must injected back evaluation context !! (single expression) !!! (list expressions). simple case, code equivalent usage {{ ... . Defusing enquo() enquos() needed complex cases, instance need inspect modify expressions way. .data pronoun object represents current slice data. variable name string, use .data pronoun subset variable [[. Another tidy eval operator :=. makes possible use glue curly-curly syntax LHS =. technical reasons, R language support complex expressions left =, use := workaround. Many tidy eval functions like dplyr::mutate() dplyr::summarise() give automatic name unnamed inputs. need create sort automatic names , use as_label(). instance, glue-tunnelling syntax can reproduced manually : Expressions defused enquo() (tunnelled {{) need simple column names, can arbitrarily complex. as_label() handles cases gracefully. code assumes simple column name, use as_name() instead. safer throws error input name expected.","code":"my_function <- function(data, var, ...) {   data %>%     group_by(...) %>%     summarise(mean = mean({{ var }})) } my_function <- function(data, var, ...) {   # Defuse   var <- enquo(var)   dots <- enquos(...)    # Inject   data %>%     group_by(!!!dots) %>%     summarise(mean = mean(!!var)) } my_var <- \"disp\" mtcars %>% summarise(mean = mean(.data[[my_var]])) my_function <- function(data, var, suffix = \"foo\") {   # Use `{{` to tunnel function arguments and the usual glue   # operator `{` to interpolate plain strings.   data %>%     summarise(\"{{ var }}_mean_{suffix}\" := mean({{ var }})) } my_function <- function(data, var, suffix = \"foo\") {   var <- enquo(var)   prefix <- as_label(var)   data %>%     summarise(\"{prefix}_mean_{suffix}\" := mean(!!var)) }"},{"path":"https://ct-data-haven.github.io/dcws/news/index.html","id":"dcws-013","dir":"Changelog","previous_headings":"","what":"dcws 0.1.3","title":"dcws 0.1.3","text":"Add 2021 crosstabs Switch cli package messaging","code":""},{"path":"https://ct-data-haven.github.io/dcws/news/index.html","id":"dcws-012","dir":"Changelog","previous_headings":"","what":"dcws 0.1.2","title":"dcws 0.1.2","text":"Update several 2021 crosstabs Add vignette locations left cws_full_data","code":""},{"path":"https://ct-data-haven.github.io/dcws/news/index.html","id":"dcws-011","dir":"Changelog","previous_headings":"","what":"dcws 0.1.1","title":"dcws 0.1.1","text":"Better ordering group levels Add .drop_ct argument fetch_cws Update vignette","code":""},{"path":"https://ct-data-haven.github.io/dcws/news/index.html","id":"dcws-010","dir":"Changelog","previous_headings":"","what":"dcws 0.1.0","title":"dcws 0.1.0","text":"First full build vignette ðŸŽ‰","code":""},{"path":"https://ct-data-haven.github.io/dcws/news/index.html","id":"dcws-0009000","dir":"Changelog","previous_headings":"","what":"dcws 0.0.0.9000","title":"dcws 0.0.0.9000","text":"Added NEWS.md file track changes package.","code":""}]
